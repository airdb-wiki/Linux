import{_ as s,p as e,q as n,a1 as a}from"./framework-d81ad7e5.js";const i={},d=a(`<h1 id="ssh" tabindex="-1"><a class="header-anchor" href="#ssh" aria-hidden="true">#</a> SSH</h1><p>ssh(Secure Shell) 是典型的 C/S 框架，包含服务端(sshd) 和 客户端(ssh)</p><h1 id="客户端-ssh" tabindex="-1"><a class="header-anchor" href="#客户端-ssh" aria-hidden="true">#</a> 客户端 ssh</h1><p>管理大规模机群的时候会觉得经常输入yes比较麻烦，尤其是主机重装后，还需要清理 known_hosts 文件，可以进行配置一下，这样用起来更顺手。 配置 $HOME/.ssh/config如下:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">StrictHostKeyChecking no
UserKnownHostsFile /dev/null
ConnectTimeout 3
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">alias ssh=&quot;ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o \\
ConnectTimeout=3&quot;
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="服务端-sshd" tabindex="-1"><a class="header-anchor" href="#服务端-sshd" aria-hidden="true">#</a> 服务端 sshd</h2><p>配置文件 /etc/ssh/sshd_config</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">Banner /etc/ssh/banner_file      # 登录主机时显示的一个 banner，可以是欢迎语
PasswordAuthentication no
PermitRootLogin yes             # 允许root用户远程登录
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="生成证书" tabindex="-1"><a class="header-anchor" href="#生成证书" aria-hidden="true">#</a> 生成证书</h1><p>ssh-keygen -b 2048 -C $HOSTNAME</p><h2 id="排障" tabindex="-1"><a class="header-anchor" href="#排障" aria-hidden="true">#</a> 排障</h2><p>如果目标机器无法 ssh，可以使用 -v 参数排查详情。</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>个别主机，可能会设置 /etc/hosts.allow 或 /etc/hosts.deny。</p></div>`,15),t=[d];function r(c,l){return e(),n("div",null,t)}const h=s(i,[["render",r],["__file","ssh.html.vue"]]);export{h as default};
